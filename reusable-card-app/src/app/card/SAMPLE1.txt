   @Test
    void testUpdatePaymentLines_Success() {
        // Setup test data
        String user = "testUser";
        List<UpdatePaymentLines> finalDataForInsertion = new ArrayList<>();

        // Create a sample UpdatePaymentLines object and add it to the list
        UpdatePaymentLines samplePaymentLine = new UpdatePaymentLines();
        samplePaymentLine.setInvoiceReference("INV123");
        samplePaymentLine.setSendingDate(LocalDate.of(2023, 10, 27));
        samplePaymentLine.setAmount(100.0);
        samplePaymentLine.setPaymentReferences(new String[]{"REF123-1", "REF123-2"}); // Set paymentReferences

        finalDataForInsertion.add(samplePaymentLine);

        // Mock paymentRepository
        List<SrgPaymentModel> srgPaymentModels = new ArrayList<>();
        // Add sample SrgPaymentModel objects to the list (you might need to populate this based on your actual logic)
        srgPaymentModels.add(new SrgPaymentModel()); // Add at least one mock object

        when(paymentRepository.getPaymentEntitiesByPaymentReference("REF123-1")).thenReturn(srgPaymentModels);
        when(paymentRepository.getPaymentEntitiesByPaymentReference("REF123-2")).thenReturn(srgPaymentModels);

        // Mock invoiceServiceApi behavior
        when(invoiceServiceApi.sendPaymentDetailsToInvoiceService(any())).thenReturn(null);

        // Execute the method
        String result = cashAllocationDomain.updatePaymentLines(user, finalDataForInsertion);

        // Verify the result
        assertEquals("SUCCESSFUL", result);

        // Verify interactions
        verify(invoiceServiceApi, times(1)).sendPaymentDetailsToInvoiceService(any());
    }
