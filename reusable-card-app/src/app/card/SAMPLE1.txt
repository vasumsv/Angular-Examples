
    @Test
    void testGetPaymentLinesFromPaymentReference() {
        // Setup test data
        String[] paymentReferences = {"REF123-1", "REF123-2"};

        // Mock the intermediate method (adjust the method name as needed)
        List<PaymentEntity> paymentEntities = new ArrayList<>();
        PaymentEntity paymentEntity = new PaymentEntity();
        // Set properties of paymentEntity if needed
        paymentEntities.add(paymentEntity);

        when(cashAllocationDomain.fetchPaymentEntities(anyString())).thenReturn(paymentEntities); // Mock the intermediate method

        // Mock getSsiDetails
        List<String> ssiDetails = new ArrayList<>();
        ssiDetails.add("SSI1-A");
        ssiDetails.add("SSI1-B");
        when(paymentRepository.getSsiDetailsByProviderAndCurrencyAndEntityAndFeeCategory(anyString(), anyString(), anyString(), anyString())).thenReturn(ssiDetails);

        // Execute the method
        List<PaymentLinesModel> result = cashAllocationDomain.getPaymentLinesFromPaymentReference(paymentReferences);

        // Verify the result